// Finger drink display
.drink-detail-page(v-if="isFingerDrink && fingerBottle")
  .container
      //-.back-navigation
        NuxtLink.btn.btn-back(:to="`/${tenant}/bottles/${fingerBottle.id}`") ‚Üê Back to Bottle
      .drink-hero
        .drink-hero__image(v-if="fingerBottle.image")
          img(:src="fingerBottle.image" :alt="fingerBottle.name")
        .drink-hero__content
          h1 {{ fingerBottle.name }}{{ servingStyle === 'rocks' ? ' On The Rocks' : ', Straight Up' }}
          .badge-row
            span.source-badge.local ü•É Special Finger
            span.category-badge {{ fingerBottle.category }}
          .availability-info
            p(v-if="fingerBottle.inStock") ‚úÖ Available now!
            p(v-else) ‚ö†Ô∏è Currently out of stock

      .drink-content
        .drink-ingredients
          h2 What You'll Need
          ul.ingredients-list
            li.available
              span.ingredient-name {{ fingerBottle.name }}
              span.ingredient-qty 2 oz
            li.available(v-if="servingStyle === 'rocks'")
              span.ingredient-name Ice
              span.ingredient-qty As needed

        .drink-instructions
          h2 Instructions
          .instructions-container
            .instruction-step.scroll-animated(v-if="servingStyle === 'straight'")
              .step-number 1
              p Pour 2 ounces of {{ fingerBottle.name }} into a rocks glass.
            .instruction-step.scroll-animated(v-else-if="servingStyle === 'rocks'")
              .step-number 1
              p Fill a rocks glass with ice.
            .instruction-step.scroll-animated(v-if="servingStyle === 'rocks'")
              .step-number 2
              p Pour 2 ounces of {{ fingerBottle.name }} over the ice.
            .instruction-step.scroll-animated
              .step-number {{ servingStyle === 'rocks' ? '3' : '2' }}
              p Serve and enjoy this special occasion spirit on its own, without any mixers.

// Regular drink display
.drink-detail-page(v-else-if="drink && !isLoading")
  .container
    //- .back-navigation
    //-   NuxtLink.btn.btn-back(:to="`/${tenant}/drinks`") ‚Üê Back to Drinks
    .drink-hero(:class="{ 'full-width': !drinkImageUrl, 'has-image': drinkImageUrl }")
      
      .hero-content
        hgroup
          h1.drink-name {{ drink ? drink.name : '' }}
          p.fully-available(v-if="drink && isFullyAvailable") All ingredients available
          p.partially-available(v-else-if="drink && !isFullyAvailable") ‚ö†Ô∏è {{ availableCount }}/{{ totalCount }} ingredients available
        .back-navigation
          NuxtLink.back-btn(:to="`/${tenant}/drinks`") ‚Üê Back to Drinks
        .badge-row
          abbr.badge.source(
            v-if="drink"
            :class="isLocalDrink ? 'local' : 'external'"
            :title="isLocalDrink ? 'This drink is made with ingredients from your bar' : 'This drink is from the CocktailDB API'"
            ) {{ isLocalDrink ? 'Local Drink' : 'CocktailDB' }}
          abbr.badge.category(v-if="drink && drink.category" :title="`This drink's category is ${drink.category}`") {{ drink.category }}
          abbr.badge.prep(v-if="drink && drink.prep" :title="`This drink's preparation is ${drink.prep}`") {{ drink.prep }}
        .tags-row(v-if="drink && drink.tags && drink.tags.length > 0")
          span.tag(v-for="tag in drink.tags" :key="tag") {{ tag }}
        
      .drink-hero__image(v-if="drinkImageUrl && drink")
        img(:src="drinkImageUrl" :alt="drink.name")

    .drink-content
      .drink-ingredients
        h2 Ingredients
        ul.ingredients-list(v-if="drink")
          li(
            v-for="(ingredient, index) in drink.ingredients"
            :key="index"
            :class="{ 'available': isIngredientAvailable(ingredient.name), 'optional': ingredient.optional }"
          )
            span.ingredient-name 
              | {{ ingredient.name }}
              span.optional-label(v-if="ingredient.optional")  (optional)
            span.ingredient-qty(v-if="ingredient.qty") {{ ingredient.qty }}

      .drink-instructions
        h2 Instructions
        .instructions-container(v-if="drink")
          .instruction-step(
            v-for="(step, index) in instructionSteps"
            :key="index"
            class="scroll-animated"
          )
            .step-number {{ index + 1 }}
            p {{ step }}

// Skeleton for Drink (while loading)
.drink-detail-page.drink-skeleton(v-else-if="(isLoading)")
  .container
    .back-navigation
      NuxtLink.btn.btn-back(:to="`/${tenant}/drinks`") ‚Üê Back to Drinks

    .drink-hero
      .drink-hero__image.skeleton
        .skeleton-img
          img(src="https://picsum.photos/800/600")
      .drink-hero__content
        h1 Loading drink...
        .badge-row
          span.source-badge.external.skeleton 
            span.skeleton-text loading
          span.category-badge.skeleton
            span.skeleton-text loading
          span.prep-badge.skeleton 
            span.skeleton-text loading
        .tags-row
          span.tag.skeleton 
            span.skeleton-text loading
          span.tag.skeleton 
            span.skeleton-text loading
        .availability-info.skeleton
          p.skeleton-text loading
    
    .drink-content
      .drink-ingredients.skeleton
        h2 Ingredients
        ul.ingredients-list
          li(v-for="n in 4" :key="n")
            span.ingredient-name.skeleton-text &nbsp;
            span.ingredient-qty.skeleton-text &nbsp;

      .drink-instructions
        h2 Instructions
        .instructions-container
          .instruction-step.skeleton(v-for="n in 3" :key="n")
            .step-number &nbsp;
            p.skeleton-text &nbsp;

// ERROR: Drink not found
.not-found(v-else-if="dataReady && !isLoading && !drink && !isFingerDrink")
  .container
    h2 Drink Not Found
    p The drink you're looking for doesn't exist.
    NuxtLink.btn.btn-primary(:to="`/${tenant}/drinks`") Back to Drinks
